!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("solarnetwork-api-core")):"function"==typeof define&&define.amd?define(["exports","solarnetwork-api-core"],t):t(e.sn=e.sn||{},e.sn)}(this,function(e,t){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},a=function(e){function t(){return n(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),r(t,[{key:"date",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"date",this).call(this,this.fixedDate||e)}},{key:"fixedDate",get:function(){return this._fixedDate},set:function(e){var n=e instanceof Date?e:new Date;this._fixedDate=n,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"date",this).call(this,n)}},{key:"signingKeyValid",get:function(){return!!this.signingKey}}]),t}(t.AuthorizationV2Builder);e.TestAuthorizationV2Builder=a,e.testRequest=function(e){var t=function t(n){function r(e,t){var n=f.get(e);n&&n.forEach(function(e){e.call(s,t)})}function o(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function i(e){var n,i=a.status;if(!i&&o(a)||i>=200&&i<300||304===i){if(n=a,u)try{n=u.call(s,a)}catch(e){return void event.call("error",t,e)}else n=a;r("load",n)}else r("error",e)}var u,a=new e,c=new Map,f=new Map,s={};return"onload"in a?a.onload=a.onerror=a.ontimeout=i:a.onreadystatechange=function(e){a.readyState>3&&i(e)},s.on=function(e,t){var n=f.get(e);return n||(n=[],f.set(e,n)),n.push(t),s},s.mimeType=function(e){return c.set("Accept",e),s},s.response=function(e){return u=e,s},s.get=function(e,t){return s.send("GET",e,t)},s.post=function(e,t){return s.send("POST",e,t)},s.send=function(e,t,o){return a.open(e,n),c.forEach(function(e,t){a.setRequestHeader(t,e)}),o&&s.on("error",o).on("load",function(e){return o(null,e)}),r("beforesend",a),a.send(t),s},s},n=function(e,n){return function(r,o){var i=t(r).mimeType(e).response(n);return null!=o?i.get(o):i}}("application/json",function(e){return JSON.parse(e.responseText)});return{request:t,json:n}},Object.defineProperty(e,"__esModule",{value:!0})});